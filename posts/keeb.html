<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="Alex Mikhailov"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="color-scheme" content="light dark"/><link rel="icon" type="image/x-icon" href="/resources/favicon.ico"/><link rel="stylesheet" href="/resources/css/pico.sand.min.css"/><script defer="true" src="https://umami.dokutsu.xyz/script.js" data-website-id="d52d9af1-0c7d-4531-84c6-0b9c2850011f"></script><title>My keyboard journey</title></head><body><main class="container"><header class="header"><nav><ul><li><strong>My keyboard journey</strong></li></ul><ul><li><a href="/index.html">About</a></li><li><a href="/blog.html">Blog</a></li><li><a href="/rss.xml">RSS</a></li></ul></nav></header><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgee56a1c">My end-game (at least I hope) keyboard</a>
<ul>
<li><a href="#org19f2518">Keebs path</a>
<ul>
<li><a href="#orgedc4a59">Dactyl manuform</a></li>
<li><a href="#org0733a68">Moonlander</a></li>
<li><a href="#orgd44d408">Custom Corne</a></li>
<li><a href="#org9142b3c">Dactyl manuform again</a></li>
</ul>
</li>
<li><a href="#org7868446">Hardware</a>
<ul>
<li><a href="#orgbd2b5a2">Body</a></li>
<li><a href="#org0cc0d1a">Switches and caps</a></li>
<li><a href="#org6c3545c">Controllers</a></li>
<li><a href="#org66d530a">Amoeba things</a></li>
</ul>
</li>
<li><a href="#org2a01ee5">Software</a>
<ul>
<li><a href="#org5dedbb9">Plain default - QMK</a></li>
<li><a href="#orgd494a21">Make own layout</a></li>
</ul>
</li>
<li><a href="#org5c7fcff">Whats next?</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgee56a1c" class="outline-2">
<h2 id="orgee56a1c">My end-game (at least I hope) keyboard</h2>
<div class="outline-text-2" id="text-orgee56a1c">
</div>
<div id="outline-container-org19f2518" class="outline-3">
<h3 id="org19f2518">Keebs path</h3>
<div class="outline-text-3" id="text-org19f2518">
<p>
Sometimes I think about the long journey I've made with keebs. In childhood, I had decent membrane keyboards, most of which had an ergonomic profile like the MS. Not sure if it somehow affected my taste because I started my career with the simplest, cheapest board and typed countless lines of code on such keebs. Then I heard about clickity-clack mechanical keyboards and decided to try one. It was a simple Chinese keeb with a thick metal body, double-shot caps, and Cherry Brown switches. A decent thing to annoy everyone around you. I think this purchase marked my dive into mech keebs
I'm not a geeky aficionado who thinks you can fix everything with a new keyboard, but I built a couple of them. I hope I've finally built the last one for quite some time.
</p>
</div>
<div id="outline-container-orgedc4a59" class="outline-4">
<h4 id="orgedc4a59">Dactyl manuform</h4>
<div class="outline-text-4" id="text-orgedc4a59">
<p>
Almost all of the time, I struggle with my maximalism. So I decided to build the ultimate mechanical ergonomic split keyboard and chose the Dactyl Manuform. Sounds like a crazy idea. Zero experience with QMK, zero experience with hand-wired keyboards, and zero experience in 3D printing.
The last problem was the easiest one; I just asked my friend to print the bodies from PETG polymer, and Bob's your uncle. I got two pieces of rough-layered plastic with all the support structures. God, it was a nightmare to clean these prints from supports and small artifacts, but I was happy.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-manuform-6.jpg" alt="dactyl-manuform-6.jpg" />
</p>
</div>

<p>
I ordered a set of Kailh Brown switches, cheap no-name DSA caps, two controllers, and a pile of diodes. Two evenings later, I built the hardware of my first keeb. It was ugly on both sides, but it was functional.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-manuform-5.jpg" alt="dactyl-manuform-5.jpg" />
</p>
</div>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-manuform-4.jpg" alt="dactyl-manuform-4.jpg" />
</p>
</div>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-manuform-3.jpg" alt="dactyl-manuform-3.jpg" />
</p>
</div>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-manuform-2.jpg" alt="dactyl-manuform-2.jpg" />
</p>
</div>

<p>
QMK wasn't a big issue either. It has decent docs and examples. The most complicated thing was the layout. I tuned it for a couple of months. It was still a mess, but an acceptable mess. That's how I got into keebs.
To be honest, this keeb was ugly, and I decided that I wanted a beautiful factory-built one.
</p>
</div>
</div>
<div id="outline-container-org0733a68" class="outline-4">
<h4 id="org0733a68">Moonlander</h4>
<div class="outline-text-4" id="text-org0733a68">
<p>
Nothing special. Ordered, paid, got it, tried it. Everything worked. Looked good. Happy year of typing. Bored. Annoyed. Too big and chunky. No concave. Quality not the best. Started planning the next one.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/moonlander.jpg" alt="moonlander.jpg" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgd44d408" class="outline-4">
<h4 id="orgd44d408">Custom Corne</h4>
<div class="outline-text-4" id="text-orgd44d408">
<p>
This journey started with discovering the Jian keyboard. It is a niche keeb from the Ru community focused on full support of the whole Russian layout. It was originally created by KGOH. I missed the group buy and decided that I could easily patch a Corne board with two additional keys to mimic the Jian.
Interesting journey. I learned how to use KiCad, and how to export gerbers.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/jirne-5.png" alt="jirne-5.png" />
</p>
</div>


<div class="figure">
<p><img src="../resources/images/keeb/jirne-6.png" alt="jirne-6.png" />
</p>
</div>

<p>
I've ordered PCBs at JLCPCB.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/jirne-8.jpeg" alt="jirne-8.jpeg" />
</p>
</div>


<div class="figure">
<p><img src="../resources/images/keeb/jirne-9.jpeg" alt="jirne-9.jpeg" />
</p>
</div>

<p>
The build came out pretty decent. I was happy. RGB underglow. Low-profile switches. I think at this point, I found a way to make balanced builds.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/jirne-7.jpeg" alt="jirne-7.jpeg" />
</p>
</div>

<p>
Daily driver for ~6 months. Then the world changed, and I decided to leave my home country and settle somewhere else.
</p>
</div>
</div>
<div id="outline-container-org9142b3c" class="outline-4">
<h4 id="org9142b3c">Dactyl manuform again</h4>
<div class="outline-text-4" id="text-org9142b3c">
<p>
Two years late I've settled down in new country and decide that I want to bring back my dactyl manuform experience.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-pitch.jpeg" alt="dactyl-pitch.jpeg" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org7868446" class="outline-3">
<h3 id="org7868446">Hardware</h3>
<div class="outline-text-3" id="text-org7868446">
</div>
<div id="outline-container-orgbd2b5a2" class="outline-4">
<h4 id="orgbd2b5a2">Body</h4>
<div class="outline-text-4" id="text-orgbd2b5a2">
<p>
I've choose to use a <a href="https://ryanis.cool/dactyl/#manuform">Ryan's generator</a> and generate body on top of Corne preset with all keys in last row and disabled stagger for the last two columns. <a href="https://ryanis.cool/dactyl/#manuform:CiUIBhAEGgp0aHJlZS1taW5pIgRmdWxsKgNib3gyBm5vcm1pZTgAGgoIARIEbm9uZRgAIhdVAACAQBgAIABdAADgQGUAAEBAQABIADL5AZUDAAAgQJ0DAACAP4ADAIgDAA0AAAAAFQAAAAAdMzMzQCUAANDALQAAUME1AADAQD0AAAAARQAAAABNAADAQFUAAEDAXQAA4EBlMzNhwm0zMy3CdQAAvMF45wKAAc0YiAHIJJUBMzMXwp0BMzNdwqUBZmbKwagBnwuwAZkXuAH8JcUBAABQws0BAADQwdUBAABAwdgBnATgAfMX6AGQHPUBAADowf0BAAAkwoUCAABQwYgCmwSQAvMXmALgIaUCAAAMwq0CAABwwbUCAAAAwLgChAfAApUQyAKEB9UCAABAwd0CAACAweUCAABAQOgChAfwApUQ+AKEBw==">Generator preset</a>
The body was printed by JLC3DP (JLCPCB printing department). I've choose <a href="https://jlc3dp.com/help/article/502-Precimid-1172-Pro">SLS from nylon</a>. Print has minor artifacts; I expected better quality.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-body-2.jpeg" alt="dactyl-body-2.jpeg" />
</p>
</div>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-body-1.jpeg" alt="dactyl-body-1.jpeg" />
</p>
</div>

<p>
Overall, I'm happy with results. I also printed bottom plates and <a href="https://github.com/rianadon/dactyl-configurator/blob/main/src/connectors.md">external holders</a> for controllers and TRRS jack. They have been printed from <a href="https://jlc3dp.com/help/article/282-8001-Photosensitive-Resin">resin with SLA</a>. Looks neat.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-body-3.jpeg" alt="dactyl-body-3.jpeg" />
</p>
</div>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-body-4.jpeg" alt="dactyl-body-4.jpeg" />
</p>
</div>
</div>
</div>

<div id="outline-container-org0cc0d1a" class="outline-4">
<h4 id="org0cc0d1a">Switches and caps</h4>
<div class="outline-text-4" id="text-org0cc0d1a">
<p>
I've chosen Kailh BOX Navy switches. I really like the clickity-clack sound. They have a dedicated clickbar to produce this sound, and the box profile helps with moving down perpendicularly.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/kailh-box.jpg" alt="kailh-box.jpg" />
</p>
</div>

<p>
The caps are inherited from the Moonlander. They are thick, double-shot caps with a nice texture.
</p>
</div>
</div>
<div id="outline-container-org6c3545c" class="outline-4">
<h4 id="org6c3545c">Controllers</h4>
<div class="outline-text-4" id="text-org6c3545c">
<p>
I used a bootleg Pro Micro called Tenstar Robot, based on the ATmega32u4. It's perfectly supported by QMK, pin-to-pin and size-compatible with the Pro Micro.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-all-3.jpg" alt="dactyl-all-3.jpg" />
</p>
</div>
</div>
</div>

<div id="outline-container-org66d530a" class="outline-4">
<h4 id="org66d530a">Amoeba things</h4>
<div class="outline-text-4" id="text-org66d530a">
<p>
During this build, I decided that I did not want to make a big mess of wires and chose Amoeba single-switch PCBs.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/amoeba.jpg" alt="amoeba.jpg" />
</p>
</div>

<p>
They are nice, have diodes on board, and simplify wiring. However, they have these flaps on the sides that do not match the places in the body. So, you need some elbow grease to grind them off.
</p>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-all-1.jpg" alt="dactyl-all-1.jpg" />
</p>
</div>


<div class="figure">
<p><img src="../resources/images/keeb/dactyl-all-5.jpg" alt="dactyl-all-5.jpg" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org2a01ee5" class="outline-3">
<h3 id="org2a01ee5">Software</h3>
<div class="outline-text-3" id="text-org2a01ee5">
</div>
<div id="outline-container-org5dedbb9" class="outline-4">
<h4 id="org5dedbb9">Plain default - QMK</h4>
<div class="outline-text-4" id="text-org5dedbb9">
<p>
Prerequiremets:
<a href="https://docs.qmk.fm/cli">QMK CLI</a>
</p>

<p>
Clone QMK, setup QMK CLI.
</p>
<div class="org-src-container">
<pre class="src src-bash">git clone git@github.com:qmk/qmk_firmware.git
<span style="font-weight: bold;">cd</span> qmk_firmware
qmk setup -h ./
</pre>
</div>

<p>
You may want to create a separate keyboard entry in QMK.
</p>
<div class="org-src-container">
<pre class="src src-bash">qmk new-keyboard
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd494a21" class="outline-4">
<h4 id="orgd494a21">Make own layout</h4>
<div class="outline-text-4" id="text-orgd494a21">
<p>
I'll try to go through setting of my personal layout. It is based on <a href="http://www.keyboard-layout-editor.com/#/gists/4b6c2af67148f58ddd6c6b2976c4370f">Jian layout</a>.
</p>

<div class="org-src-container">
<pre class="src src-JSON">"features": {
    "rgb_matrix": false,
    "bootmagic": true,
    "command": false,
    "console": false,
    "extrakey": true,
    "mousekey": true,
    "nkro": true,
    "rgblight": true
},
</pre>
</div>

<p>
Bootloader flashed to Pro Micro and target MC.
</p>
<div class="org-src-container">
<pre class="src src-JSON">"bootloader": "caterina",
"processor": "atmega32u4",
</pre>
</div>

<p>
Pins used to attach keyboard matrix.
</p>
<div class="org-src-container">
<pre class="src src-JSON">"matrix_pins": {
    "cols": ["B5", "B4", "E6", "D7", "C6", "D4", "D0"],
    "rows": ["B1", "B3", "B2", "B6"]
},
</pre>
</div>

<p>
RGB underglow configuration.
</p>
<div class="org-src-container">
<pre class="src src-JSON">"ws2812": {
    "pin": "D3"
},
"rgblight": {
    "led_count": 16,
    "led_map": [7, 6, 5, 4, 3, 2, 1, 0, 8, 9, 10, 11, 12, 13, 14, 15],
    "animations": {
	"static_light": true,
	"breathing": true,
	"rainbow_mood": true,
	"snake": false
    },
    "layers": {
	"enabled": true,
	"blink": true
    },
    "default": {
	"animation": "rainbow_mood"
    },
    "split": true,
    "split_count": [8, 8]
}
</pre>
</div>

<p>
Need to use another direction, since I use Amoeba pcbs turned 90 degrees.
</p>
<div class="org-src-container">
<pre class="src src-JSON">"diode_direction": "ROW2COL",
</pre>
</div>

<p>
Turn on split feature, assign pin for halves communication, choose what to sync.
</p>
<div class="org-src-container">
<pre class="src src-JSON">"split": {
    "enabled": true,
    "soft_serial_pin": "D2",
    "transport": {
	"protocol": "serial",
	"sync": {
	    "layer_state": true,
	    "indicators": true,
	    "modifiers": true
	}
    }
},
</pre>
</div>

<p>
This is the <code>config.h</code> file. Enables keeping handness information in EEPROM of MC. You need to flash each half once with a special commands to write EEPROM data.
<code>qmk flash -bl avrdude-split-right</code> and <code>qmk flash -bl avrdude-split-left</code>
</p>
<div class="org-src-container">
<pre class="src src-C"><span style="font-weight: bold;">#pragma</span> once
<span style="font-weight: bold;">#define</span> <span style="font-weight: bold; font-style: italic;">EE_HANDS</span>
</pre>
</div>

<p>
This is the <code>keymaps/default/keymap.c</code> file.
</p>
<pre class="example">
#include QMK_KEYBOARD_H

#define _B 0
#define _L 1
#define _R 2
#define _S 3

const rgblight_segment_t PROGMEM system_layer[] = RGBLIGHT_LAYER_SEGMENTS({0, 4, HSV_RED},
									  {12, 4, HSV_RED});

const rgblight_segment_t PROGMEM lower_layer[] = RGBLIGHT_LAYER_SEGMENTS({5, 6, HSV_CYAN});
const rgblight_segment_t PROGMEM raise_layer[] = RGBLIGHT_LAYER_SEGMENTS({5, 6, HSV_PURPLE});
const rgblight_segment_t* const PROGMEM my_rgb_layers[] = RGBLIGHT_LAYERS_LIST(system_layer,
									       lower_layer,
									       raise_layer
);

void keyboard_post_init_user(void) {
    // Enable the LED layers
    rgblight_layers = my_rgb_layers;
}

layer_state_t layer_state_set_user(layer_state_t state) {
    rgblight_set_layer_state(1, layer_state_cmp(state, _L));
    rgblight_set_layer_state(2, layer_state_cmp(state, _R));
    rgblight_set_layer_state(0, layer_state_cmp(state, _S));
    return update_tri_layer_state(state, _L, _R, _S);
}

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    // clang-format off
	[_B] = LAYOUT_split_4x7_3(
		KC_GRAVE,			KC_Q,		KC_W,	KC_E,			KC_R,				KC_T,														KC_Y,				KC_U,				KC_I,				KC_O,		KC_P,		KC_LEFT_BRACKET,
		KC_LCTL, 			KC_A,		KC_S,	KC_D,			KC_F,				KC_G,														KC_H,				KC_J,				KC_K,				KC_L,		KC_SCLN,	RCTL_T(KC_QUOTE),
		KC_LALT,			KC_Z,		KC_X,	KC_C,			KC_V,				KC_B,														KC_N,				KC_M,				KC_COMM,			KC_DOT,	KC_SLASH,	RALT_T(KC_BACKSLASH),
		KC_CAPS,			KC_NO,		KC_NO,	KC_LEFT_GUI,	LT(_R, KC_TAB),	LSFT_T(KC_SPC),	LT(_L, KC_ENT),	LSFT_T(KC_BSPC),	LT(_R, KC_DEL),	LGUI_T(KC_RCBR),	KC_D,		KC_E,  KC_F, 	LT(_L, KC_ESC)
	),
	[_L] = LAYOUT_split_4x7_3(
		KC_UNDS, 			KC_F1,		KC_F2,	KC_F3,			KC_F4,				KC_F5,										KC_F6,			KC_F7,				KC_F8,				KC_F9,		KC_F10,	KC_F11,
		LCTL_T(KC_PLUS),	KC_EXLM,	KC_AT,	KC_HASH,		KC_DLR,			KC_PERC,									KC_CIRC,		KC_AMPR,			KC_ASTR,			KC_LPRN,	KC_RPRN,	RCTL_T(KC_KP_MINUS),
		LALT_T(KC_PEQL),	KC_1,		KC_2,	KC_3,			KC_4,				KC_5,										KC_6,			KC_7,				KC_8,				KC_9,		KC_0,		KC_RALT,
		KC_NO,				KC_NO,		KC_NO,	KC_LEFT_GUI,	KC_TRNS,			LSFT_T(KC_SPC),	KC_TRNS,			LSFT_T(KC_BSPC),	KC_TRNS,			LGUI_T(KC_F12),	KC_NO,		KC_NO,		KC_NO, KC_TRNS
	),
	[_R] = LAYOUT_split_4x7_3(
		KC_NUM,			KC_PSLS,	KC_7,	KC_8,			KC_9,				KC_PMNS,									KC_VOLU,		KC_HOME,			KC_PSCR,			KC_PGUP,		KC_SCRL,	KC_CAPS,
		LCTL_T(KC_PEQL), 	KC_PAST,	KC_4,	KC_5,			KC_6,				KC_PPLS,									KC_MUTE,		KC_LEFT,			KC_UP,				KC_RIGHT,		KC_INS,	RCTL_T(KC_APP),
		KC_LALT,			KC_0,		KC_1,	KC_2,			KC_3,				KC_PDOT,									KC_VOLD,		KC_END,			KC_DOWN,			KC_PGDN,		KC_PAUS,	KC_RALT,
		KC_NO,				KC_NO,		KC_NO,	KC_LEFT_GUI,	KC_TRNS,			LSFT_T(KC_SPC),	KC_TRNS,			LSFT_T(KC_BSPC),	KC_TRNS,			KC_LGUI,			KC_NO,			KC_NO,		KC_NO, KC_TRNS
	),
    [_S] = LAYOUT_split_4x7_3(
		DB_TOGG,			KC_NO,		KC_NO,	KC_NO,			KC_NO,		KC_NO,							KC_NO,	KC_NO,		KC_NO,		KC_NO,	KC_NO,	DB_TOGG,
		QK_BOOT,			KC_NO,		KC_NO,	KC_NO,			KC_NO,		KC_NO,							KC_NO,	KC_NO,		KC_NO,		KC_NO,	KC_NO,	QK_BOOT,
		RGB_MOD,			KC_NO,		KC_NO,	KC_NO,			KC_NO,		KC_NO,							KC_NO,	KC_NO,		KC_NO,		KC_NO,	KC_NO,	KC_NO,
		RGB_RMOD,			KC_NO,		KC_NO,	QK_RBT,		KC_TRNS,	KC_NO,	KC_TRNS,		KC_NO,	KC_TRNS,	QK_RBT,	KC_NO,	KC_NO,	KC_NO, KC_TRNS
	),

    // clang-format on
};

</pre>
</div>
</div>
</div>
<div id="outline-container-org5c7fcff" class="outline-3">
<h3 id="org5c7fcff">Whats next?</h3>
</div>
</div>
<footer class="footer"><hr/><p>Alex Mikhailov</p><p>Built with: <a href="https://www.gnu.org/software/emacs/">GNU Emacs</a> <a href="https://orgmode.org/">Org Mode</a> <a href="https://picocss.com/">picocss</a></p></footer></main></body></html>
